# 通用检查项

所有 skill 遵循 CLAUDE.md 的输出格式，本文件只定义通用检查项。

## 安全检查

每次改动自动检查：
- 不打印/记录 token、密钥、密码等敏感信息
- 用户输入必须校验（类型、长度、格式）
- SQL 参数化查询，禁止拼接
- 不在日志中输出完整请求体（可能含敏感字段）
- XSS 防护：用户输入渲染前转义，不用 `v-html`/`dangerouslySetInnerHTML` 渲染不可信内容
- CSRF：状态变更接口校验 token 或 SameSite cookie
- 依赖安全：不引入已知漏洞的依赖版本，定期 `npm audit`/`go vuln`/`cargo audit`

## 兼容性检查

- API 变更向后兼容（新增字段可选，不删已有字段）
- 数据库迁移可回滚（先加后删，不直接改列类型）
- 配置变更有默认值兜底

## 代码风格

- 最小改动：只改需求要求的，不顺手重构
- 不过度设计：不加当前不需要的抽象
- 不加无关功能：bug 修复不附带功能增强

## 自测验证（改完之后）

每次改动完成后，按以下清单自测：
- 编译/构建通过：无语法错误、无类型错误、无 lint 警告
- 核心路径验证：改动涉及的主流程手动走一遍（或跑对应测试）
- 边界验证：空值/零值/超长/特殊字符/并发 至少覆盖一个最可能出问题的
- 错误路径验证：故意触发一次错误（传错参数/断开依赖），确认错误提示合理、不崩溃
- 前后端联调：改了接口的字段/格式/状态码，前端对应页面确认正常渲染
- 回归检查：跑相关模块测试，确认没有破坏已有功能
- 浏览器/设备：前端改动至少在 Chrome + 一个其他浏览器验证，移动端改动在真机验证
